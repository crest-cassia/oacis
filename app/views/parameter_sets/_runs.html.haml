- param_string = parameter_set.v.map {|key,val| "#{key}=#{val}" }.join(', ')
%h3= "Runs on (#{param_string})"

%table.table.table-condensed.table-hover.table-striped#runs_list{:'data-source' => "#{_runs_list_parameter_set_path(parameter_set.to_param, format: "json")}"}
  %thead
    %tr
      - RunsListDatatable::HEADER.each do |header|
        = raw(header)
  %tbody

%h3 Create New Runs
- run = parameter_set.runs.build
= form_for( [parameter_set, run], html: {class: 'form-horizontal', remote: true}) do |f|
  #run_form_messages
  .control-group
    = label_tag('num_runs', '# of Runs', class: 'control-label')
    .controls
      = select_tag('num_runs', options_for_select([1,2,3,4,5,10,20]))
  = render 'runs/fields', run: run, f: f
  .form-actions
    = submit_tag 'Preview', name: 'preview_button', class: 'btn'
    = f.submit(class: 'btn btn-primary')
#script_preview_modal.modal.hide.fade
  .modal-header
    %a.close{:'data-dismiss' => "modal"}x</a>
  .modal-body
    #script_preview


:javascript
  $(function() {
    var oTable = datatables_for_runs_table();
    $('#runs_list_length').append(
      '<i class="icon-refresh" id="runs_list_refresh"></i>'
    ).on('click', function() {
      oTable.fnReloadAjax();
    });
    aoRunsTables = [];
    aoRunsTables.push(oTable);
  })
